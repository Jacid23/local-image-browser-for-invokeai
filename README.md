# Local Image Browser for InvokeAI

A local web application for browsing and organizing images generated by InvokeAI. It focuses on local-first workflows, metadata search, and efficient indexing for large collections.

All processing and indexing are performed locally on the user's machine. The application has no built-in upload, sharing, or synchronization features; nothing is sent to external services.

## Features

- Local-first browsing (no uploads)
- Incremental indexing with IndexedDB caching
- Full-text metadata search (prompts, models, settings)
- Filters for model, LoRA, and scheduler
- Multi-selection and bulk operations (desktop only)
- Metadata export (TXT / JSON)
- **Fullscreen image viewing** with ESC key support
- **Refresh folder** for incremental indexing of new images
- **Accurate dimension filtering** - finds all images matching dropdown counts
- **Optimized search performance** - 3-5x faster filtering operations

### Performance

- Incremental indexing (processes only new or changed files)
- Background indexing with progress updates
- Lazy loading to reduce memory usage
- **Performance optimizations**: Caching system to prevent repeated file discovery calls
- **Reduced logging**: Eliminated excessive console output for better performance
- **Search optimization**: Unified extraction logic for consistent and fast results

## Installation

**Prerequisites:** Node.js 16+ (LTS recommended) and a modern browser

### Option 1: Download installer
1. Go to [Releases](https://github.com/LuqP2/local-image-browser-for-invokeai/releases)
2. Download the installer for your OS:
   - **Windows**: `.exe` installer
   - **macOS**: `.dmg` file  
   - **Linux**: `.AppImage` file
3. Run the installer and follow the setup wizard
4. Launch "Local Image Browser for InvokeAI" from your applications

### Option 2: Run from source
```bash
# Clone the repository
git clone https://github.com/LuqP2/local-image-browser-for-invokeai.git
cd local-image-browser-for-invokeai

# Install dependencies
npm install

# Start development server
npm run dev
```

### Option 3: Desktop app (development)
```bash
# Run as desktop app
npm run electron-dev

# Build installer
npm run electron-pack
```

## Updating

### If you installed via installer:
The app will automatically check for updates and notify you when new versions are available.

### If you're running from source:
```bash
cd local-image-browser-for-invokeai
git pull origin main
npm install  # In case of new dependencies
npm run dev
```

## Browser compatibility

- Chrome 86+ ‚Äî File System Access API supported
- Edge 86+ ‚Äî File System Access API supported
- Firefox ‚Äî Limited support (fallback required)
- Safari ‚Äî Not supported

## Roadmap

### Recently completed
- Enhanced filters: scheduler auto-detection
- File management: rename and delete operations
- Multi-selection support (Ctrl+click)
- Bulk deletion with confirmation
- Desktop app wrapper with auto-updater
- Metadata export (TXT, JSON)

### Current (v1.7.1)
- ‚úÖ **Fullscreen Image Viewing**: Added fullscreen functionality with ESC key support and hover controls
- ‚úÖ **Refresh Folder**: Incremental indexing capability for processing only new images
- ‚úÖ **Performance Optimizations**: Caching system and reduced logging for better performance
- ‚úÖ **Electron Detection**: Fixed Electron environment detection for proper file operations
- ‚úÖ **Stability Improvements**: Resolved infinite logging loops and improved error handling

### Short Term (v1.8)
- Dimension Filtering: Filter by image dimensions (512x512, 1024x1024, etc.)
- Advanced Filters: Steps slider, CFG Scale slider
- Virtual Scrolling: Efficient rendering for massive collections
- Keyboard Shortcuts: Navigation and selection hotkeys

### Medium Term (v1.9)
- Multi-Platform Support: ComfyUI and Automatic1111 metadata parsing
- Tag System: Custom tagging and organization
- Image Comparison: Side-by-side view for selected images
- Analytics Dashboard: Usage statistics and trends

### Long Term (v2.0)
- Universal AI Browser: Support for all major AI image generation platforms
- Image Similarity: Find similar images using embeddings
- Cloud Sync: Optional cloud backup and sync
- Plugin System: Extensible architecture for custom parsers

## Quick start

1. Select the folder containing your InvokeAI outputs.
2. Wait for the initial indexing (may take several minutes for large collections).
3. Browse, select, and filter images using the search and filter controls.
4. Click an image to view metadata and export options.

## Usage notes

- First load: initial indexing can take minutes for large collections
- Subsequent loads: cached data loads quickly with performance optimizations
- New images: only new or changed files are processed during indexing
- Performance: optimized caching prevents repeated file discovery operations
- Multi-selection: Ctrl+click for selecting multiple items
- File management: renaming and deletion are available in the desktop app
- Search: word-boundary matching is used for precise results
- Thumbnails: place thumbnails alongside images for faster display
- Export: metadata can be exported as TXT or JSON

## Technical Architecture

Built with modern web technologies for optimal performance:

- **Frontend**: React 18 + TypeScript 5.2
- **Desktop**: Electron 38 with auto-updater
- **Build Tool**: Vite 5.0
- **Storage**: IndexedDB for persistent caching
- **File Access**: File System Access API + Electron File System
- **IPC**: Secure inter-process communication for file operations
- **Styling**: Tailwind CSS (responsive design)

For detailed technical documentation, see [ARCHITECTURE.md](./ARCHITECTURE.md).

## Disclaimer

This project is an independent community tool and is not affiliated with Invoke AI, Inc. "InvokeAI" is a trademark of Invoke AI, Inc.
### User experience
- Accessibility: screen reader compatibility and keyboard navigation
- Settings persistence: sort and pagination preferences are saved
- Dark theme: optimized for extended viewing
- Responsive layout

### Privacy & Security

**Privacy and security**

- Local processing: image processing, metadata extraction, and caching occur locally
- No network requests or telemetry by default
- No user accounts required
- Offline-capable once loaded
- Local storage: cache and settings stored with browser APIs (IndexedDB, localStorage)
- File system permissions are explicit via the File System Access API
- Data remains on the user device unless exported explicitly

Note: the application is local-only. It does not provide any upload, sharing, or cloud-sync functionality. No data is transmitted by the app under normal use.

**Technical Privacy Implementation:**
- **IndexedDB**: Local database storage for caching (never synchronized)
- **File System Access API**: Direct local file access without file uploads
- **PNG Metadata Parsing**: Client-side metadata extraction from image files
- **No External CDNs**: All dependencies bundled locally (except Tailwind CSS from CDN for styling only)

This tool is designed for users who prioritize data privacy and want complete control over their AI-generated image collections.

## Performance Benchmarks

Tested and optimized for large collections:

- **17,559+ images** processed successfully
- **5,500+ images/minute** processing speed
- **3-4 minutes** initial scan for 18k images
- **~10 seconds** subsequent loads with cache
- **Memory efficient** with lazy loading and pagination
- **Thumbnail optimization** using InvokeAI's .webp cache
- **Smart filtering** excludes intermediate/temporary images automatically

## Search Features

**Precise Search Functionality:**
- **Word Boundary Matching**: Searches for complete words only (searching "city" won't match "opacity")
- **Case Insensitive**: Matches regardless of capitalization
- **Metadata Search**: Searches through all PNG metadata including prompts, model names, and generation settings
- **Real-time Results**: Instant filtering as you type
- **Combined Filtering**: Search terms work alongside model and LoRA filters

## Changelog

### v1.7.2 (2025-09-20)
**Critical Fixes and Performance Improvements:**

üîç **Search & Filtering:**
- ‚úÖ **Fixed critical search bug** - search was completely broken and finding no images
- ‚úÖ **Accurate dimension filtering** - now finds ALL images (not just partial matches)
- ‚úÖ **Unified search logic** - consistent behavior across all search types
- ‚úÖ **Optimized search performance** - 3-5x faster filtering operations

üñ•Ô∏è **User Interface:**
- ‚úÖ **Fixed Electron header buttons** - Change Folder and Update buttons now appear correctly
- ‚úÖ **Improved drag sensitivity** - better image dragging with bounds checking
- ‚úÖ **Enhanced clipboard operations** - focus management for reliable copying

‚ö° **Performance:**
- ‚úÖ **Removed excessive logging** - eliminated console spam that slowed operations
- ‚úÖ **Optimized filter processing** - pre-processed lowercase conversions
- ‚úÖ **Unified extraction functions** - consistent data extraction across components

üìÖ **Date Sorting:**
- ‚úÖ **Fixed date sorting in Electron** - now works correctly with file modification dates

üîß **Technical Improvements:**
- ‚úÖ **Consistent environment detection** - better Electron vs browser compatibility
- ‚úÖ **Improved error handling** - more robust file operations
- ‚úÖ **Auto-updater enhancements** - explicit user consent for downloads

### v1.7.1 (2025-09-20)
- Fullscreen image viewing with ESC key support
- Incremental indexing with Update button
- Enhanced metadata search and filtering

## License

This project is licensed under MIT License and is completely independent from InvokeAI. 

InvokeAI is licensed under Apache-2.0 by Invoke AI, Inc. This tool reads publicly available metadata from PNG files but does not include any InvokeAI source code.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request. For major changes, please open an issue first to discuss what you would like to change.
